name: install-deps

on:
  workflow_call:
    outputs:
      llvm_version:
        value: "13"

runs:
  using: "composite"
  steps:
    - run: sudo apt-get update
      shell: bash
    - run: sudo apt-get install -y wget software-properties-common gnupg
      shell: bash
    - run: wget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc | sudo apt-key add -
      shell: bash
    - run: sudo apt-add-repository "deb https://apt.kitware.com/ubuntu/ focal main"
      shell: bash
    - run: wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
      shell: bash
    - run: sudo add-apt-repository "deb http://apt.llvm.org/focal/ llvm-toolchain-focal-13 main"
      shell: bash
    - run: sudo apt-get install -y clang-13 clang-tidy-13 lld-13 cmake ninja-build autoconf automake libtool make libmsgsl-dev libtbb2 libtbb-dev libzstd1 libzstd-dev ccache
      shell: bash
